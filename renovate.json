{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:recommended"
  ],
  "packageRules": [
    {
      "description": "For all in 'versions/': Use Semantic Versioning to understand major/minor/patch",
      "matchFileNames": ["nix/_dockerfiles/versions/**"],
      "matchManagers": ["dockerfile"],
      "versioning": "semver"
    },
    {
      "description": "For pins: Enable digest pinning and disable tag updates",
      "matchFileNames": ["nix/_dockerfiles/pins/**"],
      "matchManagers": ["dockerfile"],
      "pinDigests": true,
      "matchUpdateTypes": ["major", "minor", "patch"],
      "enabled": false
    },
    {
      "description": "For all in 'versions/': Disable digests completely",
      "matchFileNames": ["nix/_dockerfiles/versions/**"],
      "matchManagers": ["dockerfile"],
      "pinDigests": false,
      "matchUpdateTypes": ["digest", "pinDigest"],
      "enabled": false
    },
    {
      "description": "For 'major/': Only allow major version updates",
      "matchFileNames": ["nix/_dockerfiles/versions/major/**"],
      "matchManagers": ["dockerfile"],
      "matchUpdateTypes": ["minor", "patch"],
      "enabled": false
    },
    {
      "description": "For 'major-minor/': Allow major and minor updates only",
      "matchFileNames": ["nix/_dockerfiles/versions/major-minor/**"],
      "matchManagers": ["dockerfile"],
      "matchUpdateTypes": ["patch"],
      "enabled": false
    },
    {
      "description": "For 'major-minor-patch/': Allow all updates",
      "matchFileNames": ["nix/_dockerfiles/versions/major-minor-patch/**"],
      "matchManagers": ["dockerfile"],
      "matchUpdateTypes": [],
      "enabled": true
    }
  ],
  "prConcurrentLimit": 10,
  "prCreation": "immediate",
  "autoApprove": true,
  "automerge": false,
  "labels": [
    "dependencies",
    "docker"
  ],
  "commitMessagePrefix": "chore(docker): ",
  "commitMessageTopic": "{{depName}}",
  "commitMessageExtra": "to {{newVersion}}",
  "configMigration": true
}
