{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:recommended"
  ],
  "packageRules": [
    {
      "description": "For pins: ALWAYS enable digest pinning for all images",
      "matchFileNames": ["nix/_dockerfiles/pins/**"],
      "matchManagers": ["dockerfile"],
      "pinDigests": true
    },
    {
      "description": "For pins: Disable all tag updates (major, minor, patch)",
      "matchFileNames": ["nix/_dockerfiles/pins/**"],
      "matchManagers": ["dockerfile"],
      "matchUpdateTypes": ["major", "minor", "patch"],
      "enabled": false
    },
    {
      "description": "For all in 'versions/': Disable digests completely",
      "matchFileNames": ["nix/_dockerfiles/versions/**"],
      "matchManagers": ["dockerfile"],
      "pinDigests": false,
      "matchUpdateTypes": ["digest", "pinDigest"],
      "enabled": false
    },
    {
      "description": "For 'major/': Only allow major version updates",
      "matchFileNames": ["nix/_dockerfiles/versions/major/**"],
      "matchManagers": ["dockerfile"],
      "matchUpdateTypes": ["minor", "patch"],
      "enabled": false
    },
    {
      "description": "For 'major-minor/': Allow major and minor updates only",
      "matchFileNames": ["nix/_dockerfiles/versions/major-minor/**"],
      "matchManagers": ["dockerfile"],
      "matchUpdateTypes": ["patch"],
      "enabled": false
    }
  ],
  "prConcurrentLimit": 0,
  "prHourlyLimit": 0,
  "prCreation": "immediate",
  "autoApprove": true,
  "automerge": false,
  "labels": [
    "dependencies",
    "docker"
  ],
  "commitMessagePrefix": "chore(docker): ",
  "commitMessageTopic": "{{depName}}",
  "commitMessageExtra": "to {{newVersion}}",
  "configMigration": true
}
